<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZenCareer - Personality Quiz</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            color: white;
            overflow: hidden;
            position: relative;
        }
        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: -1;
        }
        .quiz-container {
            position: relative;
            max-width: 800px;
            margin: 40px auto;
            padding: 30px;
            background-color: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            z-index: 1;
            transition: opacity 0.5s ease;
        }
        .quiz-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .progress-container {
            margin-bottom: 20px;
        }
        .progress-bar {
            height: 8px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.5s ease;
        }
        .progress-text {
            text-align: right;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        .pet-container {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
        }
        .pet-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .question-bubble {
            background-color: white;
            color: #333;
            border-radius: 20px;
            padding: 20px;
            margin-left: 20px;
            position: relative;
            max-width: calc(100% - 150px);
        }
        .question-bubble::before {
            content: '';
            position: absolute;
            left: -15px;
            top: 30px;
            border-width: 8px;
            border-style: solid;
            border-color: transparent white transparent transparent;
        }
        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        .answers-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .answer-option {
            background-color: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        .answer-option:hover {
            background-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }
        .answer-option.selected {
            background-color: rgba(76, 175, 80, 0.4);
            border-color: #4CAF50;
        }
        .quote-container {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            font-style: italic;
        }
        .audio-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 100;
        }
        .audio-icon {
            width: 24px;
            height: 24px;
            fill: white;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .fade-in {
            animation: fadeIn 0.5s forwards;
        }
        .fade-out {
            animation: fadeOut 0.5s forwards;
        }
    </style>
</head>
<body>
    <video class="video-background" id="videoBackground" autoplay muted>
        <source src="https://zencareer.b-cdn.net/world_journey.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>
    
    <div class="quiz-container" id="quizContainer">
        <div class="quiz-header">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Question 1/40</div>
            </div>
        </div>
        
        <div class="pet-container">
            <img id="petImage" src="" alt="Your Guide" class="pet-image">
            <div class="question-bubble">
                <div class="question-text" id="questionText">Loading questions...</div>
            </div>
        </div>
        
        <div class="answers-container" id="answersContainer">
            <!-- Answer options will be inserted here dynamically -->
        </div>
        
        <div class="quote-container" id="quoteContainer">
            "The journey of a thousand miles begins with a single step." - Lao Tzu
        </div>
    </div>
    
    <div class="audio-controls" id="audioControls">
        <svg class="audio-icon" id="audioIcon" viewBox="0 0 24 24">
            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
        </svg>
    </div>
    
    <audio id="backgroundMusic" loop>
        <source src="/static/audio/ambience.mp3" type="audio/mpeg">
    </audio>
    <audio id="clickSound">
        <source src="https://zencareer.b-cdn.net/click.mp3" type="audio/mpeg">
    </audio>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Setup video timestamps for pausing
            const timestamps = [
                6, 12, 18, 24, 30, 36, 42, 48, 54,
                60, 66, 72, 78, 84, 90, 96, 102, 108,
                114, 120, 126, 132, 138, 144, 150,
                156, 162, 168, 174, 180, 186,
                192, 198, 204, 210, 216, 222, 228,
                234, 240
            ];
            
            const videoBackground = document.getElementById('videoBackground');
            let currentTimestampIndex = 0;
            
            videoBackground.addEventListener('timeupdate', function() {
                if (currentTimestampIndex < timestamps.length) {
                    if (videoBackground.currentTime >= timestamps[currentTimestampIndex]) {
                        videoBackground.pause();
                        currentTimestampIndex++;
                    }
                } else {
                    // Reset to beginning if all timestamps have been reached
                    videoBackground.currentTime = 0;
                    currentTimestampIndex = 0;
                    videoBackground.play();
                }
            });
            
            // Continue background music playback
            const backgroundMusic = document.getElementById('backgroundMusic');
            backgroundMusic.volume = 0.5;
            backgroundMusic.play().catch(error => {
                console.log("Auto-play prevented:", error);
            });
            
            // Audio control functionality
            const audioControls = document.getElementById('audioControls');
            const audioIcon = document.getElementById('audioIcon');
            let isPlaying = true;
            
            audioControls.addEventListener('click', function() {
                if (isPlaying) {
                    backgroundMusic.pause();
                    audioIcon.innerHTML = '<path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>';
                } else {
                    backgroundMusic.play();
                    audioIcon.innerHTML = '<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>';
                }
                isPlaying = !isPlaying;
            });
            
            // Click sound for interactive elements
            const clickSound = document.getElementById('clickSound');
            
            // Fetch user selections
            const selectedLanguage = localStorage.getItem('selectedLanguage') || 'en';
            const selectedPet = localStorage.getItem('selectedPet') || 'panda';
            
            // Set pet image
            const petImage = document.getElementById('petImage');
            petImage.src = `https://zencareer.b-cdn.net/${selectedPet}.jpg`;
            
            // Quiz state
            let currentQuestionIndex = 0;
            let questions = [];
            let userAnswers = [];
            
            // Sample questions (would be loaded from language-specific files)
            function loadQuestions() {
                // This would typically be loaded from a language-specific file
                // For this example, using a simple array
                return [
                    {
                        question: "When faced with a difficult problem, I usually:",
                        options: [
                            "Analyze all available information systematically",
                            "Trust my intuition and feelings",
                            "Ask others for their opinions and advice",
                            "Try different approaches until something works",
                            "Look for established solutions that have worked before"
                        ],
                        quote: "The greatest glory in living lies not in never falling, but in rising every time we fall."
                    },
                    {
                        question: "In group settings, I tend to:",
                        options: [
                            "Take charge and lead discussions",
                            "Listen carefully and speak thoughtfully",
                            "Generate creative ideas and possibilities",
                            "Focus on building harmony and relationships",
                            "Ensure tasks are completed efficiently"
                        ],
                        quote: "The future belongs to those who believe in the beauty of their dreams."
                    },
                    // Add more questions as needed
                ];
            }
            
            // Initialize quiz
            function initQuiz() {
                questions = loadQuestions();
                displayQuestion(currentQuestionIndex);
                updateProgress();
            }
            
            // Display current question
            function displayQuestion(index) {
                const questionText = document.getElementById('questionText');
                const answersContainer = document.getElementById('answersContainer');
                const quoteContainer = document.getElementById('quoteContainer');
                const currentQuestion = questions[index];
                
                // Update question text
                questionText.textContent = currentQuestion.question;
                
                // Clear previous answers
                answersContainer.innerHTML = '';
                
                // Add answer options
                currentQuestion.options.forEach((option, i) => {
                    const answerElement = document.createElement('div');
                    answerElement.classList.add('answer-option');
                    answerElement.textContent = option;
                    answerElement.setAttribute('data-index', i);
                    
                    answerElement.addEventListener('click', function() {
                        // Play click sound
                        clickSound.currentTime = 0;
                        clickSound.play();
                        
                        // Select this answer
                        selectAnswer(index, i);
                    });
                    
                    answersContainer.appendChild(answerElement);
                });
                
                // Update motivational quote
                quoteContainer.textContent = currentQuestion.quote || "The journey of discovery is just as important as the destination.";
                
                // Play the video if it was paused
                videoBackground.play();
            }
            
            // Select an answer
            function selectAnswer(questionIndex, answerIndex) {
                userAnswers[questionIndex] = answerIndex;
                
                // Highlight the selected answer
                const answerOptions = document.querySelectorAll('.answer-option');
                answerOptions.forEach(option => {
                    option.classList.remove('selected');
                });
                answerOptions[answerIndex].classList.add('selected');
                
                // Move to next question after a short delay
                setTimeout(() => {
                    const quizContainer = document.getElementById('quizContainer');
                    quizContainer.classList.add('fade-out');
                    
                    setTimeout(() => {
                        // If this is the last question, go to results
                        if (currentQuestionIndex === questions.length - 1) {
                            localStorage.setItem('quizAnswers', JSON.stringify(userAnswers));
                            window.location.href = 'user-info.html';
                        } else {
                            // Otherwise, go to next question
                            currentQuestionIndex++;
                            updateProgress();
                            displayQuestion(currentQuestionIndex);
                            quizContainer.classList.remove('fade-out');
                            quizContainer.classList.add('fade-in');
                            
                            // Remove fade-in class after animation completes
                            setTimeout(() => {
                                quizContainer.classList.remove('fade-in');
                            }, 500);
                        }
                    }, 500);
                }, 500);
            }
            
            // Update progress bar
            function updateProgress() {
                const progressFill = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                
                const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
                progressFill.style.width = `${progress}%`;
                progressText.textContent = `Question ${currentQuestionIndex + 1}/${questions.length}`;
            }
            
            // Initialize the quiz
            initQuiz();
            
            // Load translations based on selected language
            loadTranslations(selectedLanguage);
            
            function loadTranslations(language) {
                // This would typically load from a separate translations file
                // For now, this is a placeholder function
                console.log(`Loading translations for: ${language}`);
            }
        });
    </script>
</body>
</html>